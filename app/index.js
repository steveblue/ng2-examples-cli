System.registerDynamic("app/environment.js",[],!0,function(a,b,c){"use strict";return b.environment={production:!0},c.exports}),System.registerDynamic("app/views/default/default.component.js",["@angular/core"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("@angular/core"),g=function(){function a(a){this.isVisible=!1,this.ref=a}return a.prototype.ngOnInit=function(){var a=this;setTimeout(function(){a.isVisible=!0,a.ref.detectChanges()},100)},a=d([f.Component({selector:"view",moduleId:c.id,template:"\n  \n  <h1>\n    Angular 2 Examples\n  </h1>\n  \n  ",styleUrls:["default.component.css"]}),e("design:paramtypes",[f.ChangeDetectorRef])],a)}();return b.Default=g,c.exports}),System.registerDynamic("app/views/about/about.component.js",["@angular/core"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("@angular/core"),g=function(){function a(){this.headline="About",this.copy="This web app contains examples of components built with Angular 2 and is maintained by Steve Belovarich, a full stack web engineer based in Los Angeles, CA."}return a=d([f.Component({selector:"view",moduleId:c.id,template:'\n  <h1>\n    {{ headline }}\n  </h1>\n  <p>\n    {{copy}}\n  </p>\n  <p>\n  Follow <a href="https://twitter.com/iplayitofflegit">@iplayitofflegit</a> on Twitter.\n  </p>\n  ',styleUrls:["about.component.css"]}),e("design:paramtypes",[])],a)}();return b.About=g,c.exports}),System.registerDynamic("app/components/track-item/track-item.component.js",["@angular/core"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("@angular/core"),g=function(){function a(){}return a=d([f.Component({selector:"track-item",inputs:["track"],template:'\n  <span class="track__image"><img src="{{track.imageUrl}}"></span>\n  <span class="track__title track__meta">{{track.title}}</span>\n  <span class="track__artist track__meta">{{track.artist}}</span>\n',moduleId:c.id,styleUrls:["track-item.component.css"]}),e("design:paramtypes",[])],a)}();return b.TrackItem=g,c.exports}),System.registerDynamic("app/components/track-list/track-list.component.js",["@angular/core","../track-item/track-item.component"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("@angular/core"),g=a("../track-item/track-item.component"),h=function(){function a(a){this.el=a,this.onselect=new f.EventEmitter,this.elem=a.nativeElement}return a.prototype.setTrack=function(a){var b=this;this.currentTrack=a,setTimeout(function(){var a=10,c=b.elem.scrollTop,d=b.elem.querySelectorAll(".selected")[0].offsetTop,e=function(){c>=d||(c+=a,b.elem.scrollTop=c,window.requestAnimationFrame(e))};window.requestAnimationFrame(e)},100)},a.prototype.ngOnInit=function(){var a=this;this.control.subscribe(function(b){a.setTrack(b.track)})},a.prototype.clicked=function(a){this.onselect.emit(a)},a.prototype.isSelected=function(a){return a&&this.currentTrack&&this.currentTrack.url===a.url?a.url===this.currentTrack.url:!1},d([f.Input(),e("design:type",Array)],a.prototype,"trackList",void 0),d([f.Input(),e("design:type",f.EventEmitter)],a.prototype,"control",void 0),d([f.Output(),e("design:type",f.EventEmitter)],a.prototype,"onselect",void 0),a=d([f.Component({selector:"track-list",template:'\n  <track-item *ngFor="let track of trackList"\n   [track]="track"\n   (click)=\'clicked(track)\'\n   [class.selected]="isSelected(track)">\n  </track-item>\n',moduleId:c.id,styleUrls:["track-list.component.css"],directives:[g.TrackItem]}),e("design:paramtypes",[f.ElementRef])],a)}();return b.TrackList=h,c.exports}),System.registerDynamic("app/schema/media.js",[],!0,function(a,b,c){"use strict";var d=function(){function a(a,b,c,d,e){this.artist=a,this.title=b,this.url=c,this.imageUrl=d,this.index=e}return a}();return b.Media=d,c.exports}),System.registerDynamic("app/services/media-service.js",["@angular/core","@angular/http","../schema/media","rxjs/add/operator/map"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("@angular/core"),g=a("@angular/http"),h=a("../schema/media");a("rxjs/add/operator/map");var i=new f.EventEmitter,j=function(){function a(a){this.http=a,this.http=a,this.emitter=i}return a.prototype.get=function(){return this.http.get("/app/models/media.json").map(function(a){return a.json().media}).map(function(a){var b=[];return a&&a.forEach(function(a){b.push(new h.Media(a.artist,a.title,a.url,a.imageUrl,a.index))}),b})},a.prototype.setFrequencyData=function(a){i.next(a)},a=d([f.Injectable(),e("design:paramtypes",[g.Http])],a)}();return b.MediaService=j,c.exports}),System.registerDynamic("app/models/meter.js",[],!0,function(a,b,c){"use strict";var d=function(){function a(a,b){this.height=a,this.i=b,this.position={x:0,y:0},this.val=0,this.isVisible=!1,this.index=b,this.tooltip={x:6,y:8,width:60,height:12,fill:"rgba(255,255,255,0.3)"},this.level={color:"rgba(255,255,255,1.0)",stroke:6,val:0,points:[{x:0,y:a},{x:0,y:a}]},this.playhead={color:"rgba(255,255,255,0.7)",stroke:6,points:[{x:0,y:0},{x:0,y:a}]}}return a}();return b.Meter=d,c.exports}),System.registerDynamic("app/components/waveform/waveform.component.js",["@angular/core","../../services/media-service","../../models/meter"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("@angular/core"),g=a("../../services/media-service"),h=a("../../models/meter"),i=function(){function a(a,b,c){this.init=!1,this.mediaService=a,this.elem=c,this.ref=b,this.color="#8DE969",this.width=window.innerWidth,this.height=240,this.data=[],this.meters=[],this.newMeter(),this.isVisible=!1,this.controls=new f.EventEmitter}return a.prototype.ngOnInit=function(){var a=this,b=d3.scale.linear().domain([0,512]).range([0,window.innerWidth]),c=d3.scale.linear().domain([0,255]).range([this.height,0]),d=d3.svg.line().interpolate("basis").x(function(a,c){return b(c)}).y(function(a,b){return c(a)});this.shape=this.elem.nativeElement.getElementsByClassName("levels")[0],this.mediaService.emitter.subscribe(function(b){if(a.data=b,b.unshift(0),b.push(0),a.path=d(b),a.meters.length>0){for(var c=0;c<a.meters.length;c++)a.meters[c].val=a.data[a.scale(a.meters[c].position.x,0,window.innerWidth,0,1024)],a.meters[c].transform="translate("+a.meters[c].position.x+", 0)",a.meters[c].level.points[0].y=a.height-a.scale(a.meters[c].val,0,255,0,a.height);a.controls.emit({meters:a.meters}),a.ref.detectChanges()}})},a.prototype.onMouseMove=function(a){1e3!==this.selected&&(this.meters[this.selected].position.x=a.clientX)},a.prototype.onMouseLeave=function(a){},a.prototype.scale=function(a,b,c,d,e){return a=parseInt(a),parseInt((a-b)/(c-b)*(e-d)+d)},a.prototype.newMeter=function(){this.meters.push(new h.Meter(this.height,this.meters.length)),this.selected=this.meters.length-1},a.prototype.addMeter=function(){this.init?(this.meters.push(new h.Meter(this.height,this.meters.length)),this.selected=this.meters.length-1):(this.isVisible=!0,this.init=!0)},a.prototype.hideMeters=function(){this.isVisible=!1},a.prototype.showMeters=function(){this.isVisible=!0},a.prototype.onMeterClick=function(a,b){this.selected===b.index?this.selected=1e3:this.selected=b.index},d([f.Output(),e("design:type",Object)],a.prototype,"path",void 0),a=d([f.Component({selector:"waveform-monitor",moduleId:c.id,templateUrl:"waveform.component.html",styleUrls:["waveform.component.css"],providers:[g.MediaService]}),e("design:paramtypes",[g.MediaService,f.ChangeDetectorRef,f.ElementRef])],a)}();return b.WaveformComponent=i,c.exports}),System.registerDynamic("app/components/audio-player/audio-player.component.js",["@angular/core","../../services/media-service","../waveform/waveform.component"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}},g=a("@angular/core"),h=a("../../services/media-service"),i=a("../waveform/waveform.component"),j=function(){function a(a,b,c){this.context=c,this.elem=a.nativeElement,this.mediaService=b,this.ctx=c,this.analyzer=this.ctx.createAnalyser(),this.processor=this.ctx.createScriptProcessor(1024),this.processor.connect(this.ctx.destination),this.analyzer.connect(this.processor),this.freqData=new Uint8Array(this.analyzer.frequencyBinCount),this.onended=new g.EventEmitter}return a.prototype.ngOnInit=function(){var a=this;this.audioElem=this.elem.querySelector("audio"),this.sourceNode=this.ctx.createMediaElementSource(this.audioElem),this.sourceNode.connect(this.analyzer),this.sourceNode.connect(this.ctx.destination),this.control.subscribe(function(b){"play"===b.action&&a.audioElem.play(),"pause"===b.action&&a.audioElem.pause()})},a.prototype.ngOnDestroy=function(){this.processor.onaudioprocess=function(){},this.sourceNode.disconnect(),this.sourceNode=null},a.prototype.onPlay=function(a){var b=this,c=function(a){for(var b=[],c=0;c<a.byteLength;c++)b[c]=a[c];return b};this.processor.onaudioprocess=function(a){b.analyzer.getByteFrequencyData(b.freqData),b.mediaService.setFrequencyData(c(b.freqData))}},a.prototype.onTrackEnded=function(a){this.processor.onaudioprocess=function(){},this.onended.emit()},d([g.Input(),e("design:type",String)],a.prototype,"url",void 0),d([g.Input(),e("design:type",Object)],a.prototype,"control",void 0),d([g.Output(),e("design:type",Object)],a.prototype,"onended",void 0),d([g.Output(),e("design:type",Object)],a.prototype,"controls",void 0),a=d([g.Component({selector:"audio-player",template:'\n  <audio controls src="{{url}}" type="audio/mpeg"\n  (play)="onPlay($event)"\n  (ended)="onTrackEnded($event)">\n  </audio>\n  <waveform-monitor></waveform-monitor>\n',directives:[i.WaveformComponent],providers:[h.MediaService],moduleId:c.id,styleUrls:["audio-player.component.css"]}),f(2,g.Inject("audioContext")),e("design:paramtypes",[g.ElementRef,h.MediaService,Object])],a)}();return b.AudioPlayer=j,c.exports}),System.registerDynamic("app/views/music-player/music-player.component.js",["@angular/core","../../services/media-service","../../components/track-list/track-list.component","../../components/audio-player/audio-player.component"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("@angular/core"),g=a("../../services/media-service"),h=a("../../components/track-list/track-list.component"),i=a("../../components/audio-player/audio-player.component"),j=function(){function a(a){var b=this;this.mediaService=a,this.playhead=0,this.currentTrack={},this.controller=new f.EventEmitter,a.get().subscribe(function(a){b.tracks=a,b.currentTrack=b.tracks[b.playhead]})}return a.prototype.ngOnInit=function(){},a.prototype.onTrackSelected=function(a){this.playhead=this.tracks.indexOf(a),this.currentTrack=this.tracks[this.playhead],this.controller.emit({action:"play",track:this.currentTrack})},a.prototype.prevTrack=function(){this.playhead=this.tracks.indexOf(this.currentTrack),this.playhead--,this.currentTrack=this.tracks[this.playhead],this.controller.emit({action:"play",track:this.currentTrack})},a.prototype.nextTrack=function(){this.playhead=this.tracks.indexOf(this.currentTrack),this.playhead++,this.currentTrack=this.tracks[this.playhead],this.controller.emit({action:"play",track:this.currentTrack})},a=d([f.Component({selector:"view",moduleId:c.id,template:'\n  <div class="music__player">\n  \n    <audio-player\n      [url]="currentTrack.url"\n      [control]="controller"\n      (onended)="nextTrack()">\n    </audio-player>\n    \n    <track-list\n      [trackList]="tracks"\n      [control]="controller"\n      (onselect)="onTrackSelected($event)">\n    </track-list>\n\n  </div>\n',styleUrls:["music-player.component.css"],directives:[h.TrackList,i.AudioPlayer],providers:[g.MediaService,f.provide("audioContext",{useValue:new(window.AudioContext||window.webkitAudioContext)})]}),e("design:paramtypes",[g.MediaService])],a)}();return b.MusicPlayer=j,c.exports}),System.registerDynamic("app/components/toggle/toggle.component.js",["@angular/core"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("@angular/core"),g=function(){function a(a){this.elem=a.nativeElement}return a.prototype.ngOnInit=function(){this.options&&(this.options.position&&(this.elem.style.position=this.options.position),this.options.x&&(this.elem.style.left=this.options.x),this.options.y&&(this.elem.style.top=this.options.y))},d([f.Input(),e("design:type",Object)],a.prototype,"options",void 0),a=d([f.Component({moduleId:c.id,selector:"ui-toggle",templateUrl:"toggle.component.html",styleUrls:["toggle.component.css"]}),e("design:paramtypes",[f.ElementRef])],a)}();return b.ToggleComponent=g,c.exports}),System.registerDynamic("app/directives/draggable.directive.js",["@angular/core"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("@angular/core"),g=function(){function a(a){this.el=a,this.elem=a.nativeElement}return a.prototype.onMouseLeave=function(){this.isPositionable=!1},a.prototype.onMouseEnter=function(){this.isActive&&(this.isPositionable=!0)},a.prototype.onMouseDown=function(a){a.preventDefault(),this.isActive=!0,this.isPositionable=!0,this.startX=a.clientX-this.elem.offsetLeft,this.startY=a.clientY-this.elem.offsetTop,"ontouchstart"in document.documentElement?(this.elem.addEventListener("touchmove",this.onTouchMove.bind(this)),this.elem.addEventListener("touchend",this.onMouseUp.bind(this))):(this.elem.addEventListener("mousemove",this.onMouseMove.bind(this)),this.elem.addEventListener("mouseup",this.onMouseUp.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this)),window.addEventListener("mouseup",this.onMouseUp.bind(this))),"ontouchstart"in document.documentElement?(a.preventDefault(),void 0===this.touchItem&&(this.touchItem=a.touches.length-1),this.newX=a.touches[this.touchItem].pageX-this.rect.left-this.handle.clientWidth/2,this.newY=a.touches[this.touchItem].pageY-this.rect.top-this.handle.clientWidth/2):(this.newX=a.offsetX,this.newY=a.offsetY),this.setPosition(this.newX,this.newY)},a.prototype.onTouchMove=function(a){a.preventDefault(),"is--joystick"===this.options.orient&&(this.elem.style.cursor='url("/assets/ui/slider-control-icon-transparent-cursor.png") 0 0, pointer'),this.elem.style.border="1px solid rgba(255,255,255,0.3)",this.handle.style.opacity="0.5",void 0===this.touchItem&&(this.touchItem=a.touches.length-1),this.newX=a.touches[this.touchItem].pageX-this.rect.left-22,this.newY=a.touches[this.touchItem].pageY-this.rect.top-66,this.setPosition(this.newX,this.newY),"is--hor"===this.options.orient?this.options.currentValue=this.scale(this.newX,0,this.elem.clientWidth-44,this.options.min,this.options.max):"is--vert"===this.options.orient?this.options.currentValue=this.scale(this.newY,0,this.elem.clientHeight-44,this.options.min,this.options.max):"is--joystick"===this.options.orient&&(this.options.currentValue=[this.scale(this.newX,0,this.elem.clientWidth-44,this.options.min[0],this.options.max[0]),this.scale(this.newY,0,this.elem.clientHeight-44,this.options.min[1],this.options.max[1])]),this.options.onUpdate&&this.options.onUpdate.emit(this.options.currentValue,a.timeStamp)},a.prototype.onMouseMove=function(a){"is--joystick"===this.options.orient&&(this.elem.style.cursor='url("/assets/ui/slider-control-icon-transparent-cursor.png") 0 0, pointer'),this.isActive&&(this.elem.style.border="1px solid rgba(255,255,255,0.3)",this.handle.style.opacity="0.5",this.newX=a.offsetX,this.newY=a.offsetY),this.isPositionable&&this.isActive&&(this.setPosition(this.newX,this.newY),"is--hor"===this.options.orient?this.options.currentValue=this.scale(this.newX,0,this.elem.clientWidth-44,this.options.min,this.options.max):"is--vert"===this.options.orient?this.options.currentValue=this.scale(this.newY,0,this.elem.clientHeight-44,this.options.min,this.options.max):"is--joystick"===this.options.orient&&(this.options.currentValue=[this.scale(this.newX,0,this.elem.clientWidth-44,this.options.min[0],this.options.max[0]),this.scale(this.newY,0,this.elem.clientHeight-44,this.options.min[1],this.options.max[1])]),this.options.onUpdate&&this.options.onUpdate.emit(this.options.currentValue,a.timeStamp))},a.prototype.onMouseUp=function(a){this.isActive=!1,this.elem.style.cursor='url("/assets/ui/slider-control-icon-transparent-cursor.png") 22 22, pointer',this.elem.style.border="1px solid rgba(255,255,255,0.2)",this.handle.style.opacity="","is--hor"===this.options.orient?this.options.currentValue=0:"is--vert"===this.options.orient?this.options.currentValue=0:"is--joystick"===this.options.orient&&(this.options.currentValue=[0,0]),"ontouchstart"in document.documentElement?this.touchItem=void 0:(this.elem.removeEventListener("mousemove",this.onMouseMove.bind(this)),this.elem.removeEventListener("mouseup",this.onMouseUp.bind(this))),this.options.onUpdate&&this.options.onUpdate.emit(this.options.currentValue,a.timeStamp)},a.prototype.getCenter=function(a,b){var c=a[1]-(a[1]-a[0])/2,d=b[1]-(b[1]-b[0])/2;return[c,d]},a.prototype.distance=function(a,b){var c=a[0],d=a[1],e=b[0],f=b[1];return Math.sqrt(Math.pow(c-e,2)+Math.pow(d-f,2))},a.prototype.scale=function(a,b,c,d,e){return(a-b)/(c-b)*(e-d)+d},a.prototype.circularBounds=function(a,b,c,d){var e=this.getCenter(c,d),f=this.distance([a,b],e),g=c[1]-e[0];if(g>=f)return[a,b];a-=e[0],b-=e[1];var h=Math.atan2(b,a);return[Math.cos(h)*g+e[0],Math.sin(h)*g+e[1]]},a.prototype.clamp=function(a,b){return Math.max(Math.min(a,b[1]),b[0])},a.prototype.setPosition=function(a,b){"is--joystick"===this.options.orient?(0>=a?this.newX=0:a>this.elem.clientWidth?this.newX=this.elem.clientWidth:this.newX=a,0>=b?this.newY=0:b>this.elem.clientWidth?this.newY=this.elem.clientWidth:this.newY=b,this.joystickPos=this.circularBounds(this.newX,this.newY,[0,this.elem.clientWidth-this.handle.offsetWidth],[0,this.elem.clientWidth-this.handle.offsetHeight]),this.newX=this.clamp(this.joystickPos[0],[0,this.elem.clientWidth-this.handle.offsetWidth]),this.newY=this.clamp(this.joystickPos[1],[0,this.elem.clientWidth-this.handle.offsetHeight]),this.options.pos.emit([this.newX+"px",this.newY+"px","1px"])):(0>=a?this.newX=0:a>this.elem.clientWidth-this.handle.offsetWidth?this.newX=this.elem.clientWidth-this.handle.offsetWidth:this.newX=a,0>=b?this.newY=0:b>this.elem.clientHeight-this.handle.offsetHeight?this.newY=this.elem.clientHeight-this.handle.offsetHeight:this.newY=b,this.options.pos.emit([this.newX+"px",this.newY+"px","1px"]))},a.prototype.ngOnInit=function(){this.handle=this.elem.getElementsByClassName("ui--slider-handle")[0],this.height=this.elem.clientHeight,this.width=this.elem.clientWidth,this.rect=this.elem.getBoundingClientRect(),"is--joystick"===this.options.orient&&this.options.pos.emit(["50%","50%","1px"])},d([f.Input("uiDraggable"),e("design:type",Object)],a.prototype,"options",void 0),a=d([f.Directive({selector:"[uiDraggable]",host:{"(mouseleave)":"onMouseLeave($event)","(mouseenter)":"onMouseEnter($event)","(mousedown)":"onMouseDown($event)","(mouseup)":"onMouseUp($event)","(mousemove)":"onMouseMove($event)","(touchstart)":"onMouseDown($event)","(touchend)":"onMouseUp($event)"}}),e("design:paramtypes",[f.ElementRef])],a)}();return b.DraggableDirective=g,c.exports}),System.registerDynamic("app/components/slider/slider.component.js",["@angular/core","../../directives/draggable.directive"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("@angular/core"),g=a("../../directives/draggable.directive"),h=function(){function a(a,b){this.ref=a,this.elem=b.nativeElement,this.transform="translate3d(0px, 0px, 1px)"}return a.prototype.ngOnInit=function(){var a=this;this._options={position:this.options.position,x:this.options.x,y:this.options.y},this._options.position&&(this.elem.style.position=this._options.position),this._options.x&&(this.elem.style.left=this._options.x),this._options.y&&(this.elem.style.top=this._options.y),this.options.pos=new f.EventEmitter,this.options.pos.subscribe(function(b){a.transform="translate3d("+b[0]+","+b[1]+","+b[2]+")",a.ref.detectChanges()})},d([f.Input("options"),e("design:type",Object)],a.prototype,"options",void 0),a=d([f.Component({selector:"slider",moduleId:c.id,templateUrl:"slider.component.html",styleUrls:["slider.component.css"],directives:[g.DraggableDirective]}),e("design:paramtypes",[f.ChangeDetectorRef,f.ElementRef])],a)}();return b.SliderComponent=h,c.exports}),System.registerDynamic("app/views/ui-test/ui-test.component.js",["../../conf","@angular/core","@angular/common","../../components/button/button.component","../../components/toggle/toggle.component","../../components/slider/slider.component","../../services/data-channel"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("../../conf"),g=a("@angular/core"),h=a("@angular/common"),i=a("../../components/button/button.component"),j=a("../../components/toggle/toggle.component"),k=a("../../components/slider/slider.component"),l=a("../../services/data-channel"),m=function(){function a(a,b,c){this._el=a,this._ref=b,this._fb=c,this.elem=a.nativeElement,this.ref=b,this.isConnected=!1,this.isConnecting=!1,this.isButtonDisabled=!0,this.room=new h.Control(""),this.form=c.group({room:this.room}),this.copy={headline:"Remote Control",line1:"Visit /remote on desktop computer to get code"},this.toggleOptions={isActive:!1,position:"absolute",x:"206px",y:window.innerHeight-280+"px"},this.joyOptions={left:{orient:"is--joystick",min:[-1,1],max:[1,-1],currentValue:[0,0],onUpdate:new g.EventEmitter,position:"absolute",x:"14px",y:window.innerHeight-214+"px"},right:{orient:"is--joystick",min:[window.innerWidth/2*-1,window.innerHeight/2*-1],max:[window.innerWidth/2,window.innerHeight/2],currentValue:[0,0],onUpdate:new g.EventEmitter,position:"absolute",x:window.innerWidth-214+"px",y:window.innerHeight-214+"px"}},this.sliderOptions={orient:"is--vert",min:12,max:-12,currentValue:0,onUpdate:new g.EventEmitter,position:"absolute",x:"228px",y:window.innerHeight-214+"px"},console.log(f["default"])}return a.prototype.ngOnInit=function(){var a=this;this.form.valueChanges.subscribe(function(b){console.log(JSON.stringify(b)),5===b.room.length?a.isButtonDisabled=!1:a.isButtonDisabled=!0}),this.joyOptions.left.onUpdate.subscribe(function(b){var c=JSON.stringify({currentValue:a.joyOptions.left.currentValue,max:a.joyOptions.left.max,min:a.joyOptions.left.min,control:"joyLeft"});a.client&&a.client.channel&&a.client.channel.send(c)}),this.joyOptions.right.onUpdate.subscribe(function(b){var c=JSON.stringify({currentValue:a.joyOptions.right.currentValue,max:a.joyOptions.right.max,min:a.joyOptions.right.min,control:"joyRight"});a.client&&a.client.channel&&a.client.channel.send(c)}),this.sliderOptions.onUpdate.subscribe(function(b){var c=JSON.stringify({currentValue:a.sliderOptions.currentValue,max:a.sliderOptions.max,min:a.sliderOptions.min,control:"slider"});a.client&&a.client.channel&&a.client.channel.send(c)})},a.prototype.onClick=function(){var a=this;this.isConnected||this.isButtonDisabled||(this.client=new l.DataChannel(this.room.value,f["default"].username,f["default"].server),this.isConnecting=!0,this.client.emitter.subscribe(function(b){console.log("hello!",b),"open"===b&&(a.isConnected=!0,a.isConnecting=!1,a.client.observer.subscribe(function(a){console.log(a)}),a.ref.detectChanges())}))},a.prototype.onToggle=function(){this.toggleOptions.isActive=!this.toggleOptions.isActive;var a=JSON.stringify({currentValue:this.toggleOptions.isActive,control:"toggle"});this.client&&this.client.channel&&this.client.channel.send(a)},a=d([g.Component({selector:"view",moduleId:c.id,templateUrl:"ui-test.component.html",styleUrls:["ui-test.component.css"],providers:[h.FORM_PROVIDERS],directives:[h.FORM_DIRECTIVES,k.SliderComponent,i.ButtonComponent,j.ToggleComponent]}),e("design:paramtypes",[g.ElementRef,g.ChangeDetectorRef,h.FormBuilder])],a)}();return b.UIComponentTest=m,c.exports}),System.registerDynamic("app/views/rtc-client/rtc-client.component.js",["../../conf","@angular/core","../../services/data-channel"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("../../conf"),g=a("@angular/core"),h=a("../../services/data-channel"),i=function(){function a(a,b){this._ref=a,this._el=b,this.headline="DataChannel",this.copy="WebRTC DataChannels allow for fast peer to peer communication. This example creates a channel, gives the client a unique identifier (i.e. username), and establishes the connection. Firebase is used for signaling. Once the connection is established, the keyCode for whatever key is typed will appear in the remote UI. Open two windows of Chrome or Firefox to test DataChannel. This service will fallback to WebSocket connection via Firebase if the peer cannot support PeerConnection. A demo featuring first person controls in a WebGL scene is in the remote section.",this.ref=a,this.elem=b.nativeElement,this.isConnected=!1,console.log(f["default"])}return a.prototype.onKeyDown=function(a){var b=JSON.stringify({val:a.keyCode});this.client.channel.send(b),13===a.keyCode&&(a.target.value="")},a.prototype.updateMessages=function(a){this.messages.length>24&&(this.messages=[]),this.ref.detectChanges()},a.prototype.onClick=function(){var a=this;this.isConnected||(this.client=new h.DataChannel(f["default"].room,f["default"].username,f["default"].server),this.messages=[],this.client.emitter.subscribe(function(b){"open"===b&&(a.isConnected=!0,a.elem.querySelector("input").focus(),a.client.observer.subscribe(function(c){var d=c[c.length-1];console.log(d),a.messages.push(d),a.updateMessages(b)}))}))},a=d([g.Component({selector:"view",moduleId:c.id,template:'\n  <h1>\n    {{ headline }}\n  </h1>\n  <p class="copy">\n    {{copy}}\n  </p>\n  <p class="button" (click)="onClick($event)" [ngClass]="{ \'is--disabled\' : isConnected }">\n    <span *ngIf="!isConnected"> Open Connection </span>\n    <span *ngIf="isConnected"> Connected </span>\n  </p>\n  <input type="text" (keypress)="onKeyDown($event)"/>\n  <ul>\n    <li *ngFor="let message of messages">\n      <p>{{message.data.val}}</p>\n    </li>\n  </ul>\n  ',styleUrls:["rtc-client.component.css"]}),e("design:paramtypes",[g.ChangeDetectorRef,g.ElementRef])],a)}();return b.DataChannelClient=i,
c.exports}),System.registerDynamic("app/models/terrain.js",[],!0,function(a,b,c){"use strict";var d=function(){function a(){this.landscape=[[0,0,0],[0,1,0],[0,1,1]]}return a.prototype.fetch=function(a){var b=new THREE.TerrainLoader;return new Promise(function(c,d){b.load(a,function(b){c([b,a])})})},a}();return b.Scene=d,c.exports}),System.registerDynamic("app/scene/terrain.scene.js",["../models/terrain"],!0,function(a,b,c){"use strict";var d=a("../models/terrain"),e=function(){function a(a,b){var c=this;this.x=0,this.y=0,this.z=0,this.angle=Math.PI/180,this.width=window.innerWidth,this.height=window.innerHeight,this.aspect=this.width/this.height,this.frame=0,this.speed=this.frame/100,this.clock=new THREE.Clock,this.scene=new THREE.Scene,this.scene.fog=new THREE.FogExp2(14086641,.001),this.camera=new THREE.PerspectiveCamera(90,c.width/c.height,.1,1e3),this.camera.position.y=.8,this.camera.lookAt(new THREE.Vector3(0,0,0)),this.controls=new THREE.FirstPersonControls(this.camera),this.controls.movementSpeed=4,this.controls.lookSpeed=.05,this.controls.noFly=!0,this.controls.lookVertical=!1,this.raycaster=new THREE.Raycaster,this.controlsVector=new THREE.Vector3(0,0,0),this.controlsVector.unproject(this.camera),this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setClearColor(new THREE.Color(1184274,1)),this.renderer.setSize(c.width,c.height),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=THREE.PCFSoftShadowMap;var e=new THREE.CubeTextureLoader,f=["/assets/skybox/posz.jpg","/assets/skybox/negz.jpg","/assets/skybox/posy.jpg","/assets/skybox/negy.jpg","/assets/skybox/posx.jpg","/assets/skybox/negx.jpg"];e.load(f,function(a){var b=THREE.ShaderLib.cube;b.uniforms.tCube.value=a;var c=new THREE.ShaderMaterial({fragmentShader:b.fragmentShader,vertexShader:b.vertexShader,uniforms:b.uniforms,depthWrite:!1,side:THREE.BackSide}),d=new THREE.BoxGeometry(10,10,10,1,1,1);this.skyMesh=new THREE.Mesh(d,c),this.skyMesh.scale.set(100,100,100),this.skyMesh.position.set(0,0,0),this.scene.add(this.skyMesh)}.bind(this)),this.sunLight=new THREE.DirectionalLight(14038800,10),this.sunLight.position.set(-300,100,-400),this.sunLight.position.multiplyScalar(5),this.sunLight.castShadow=!0,this.sunLightHelper=new THREE.CameraHelper(this.sunLight.shadow.camera),this.sunLight.shadow.mapSize.width=512,this.sunLight.shadow.mapSize.height=512,this.sunLight.lookAt(new THREE.Vector3(0,0,0)),this.scene.add(this.sunLight),this.shadowLight=new THREE.AmbientLight(255),this.shadowLight.intensity=.33336,this.scene.add(this.shadowLight);var g,h=new THREE.PlaneGeometry(20,20,120,120);h.verticesNeedUpdate=!0;var i=new THREE.MeshPhongMaterial({color:15724527,shininess:0,shading:THREE.SmoothShading});this.mesh=new THREE.Mesh(h,i),this.mesh.rotation.x=-Math.PI/2,this.mesh.position.y=-1,this.mesh.castShadow=!0;var j=new d.Scene;if(j.fetch("models/death-valley.dem").then(function(a){g=36,console.log(g,Math.sqrt(this.mesh.geometry.vertices.length),a[1]),this.mesh.geometry=new THREE.PlaneGeometry(g,g,g,g);for(var b=0,c=this.mesh.geometry.vertices.length;c>b;b++)this.mesh.geometry.vertices[b].z=a[0][b]/12e3;this.mesh.geometry.verticesNeedUpdate=!0,this.mesh.geometry.normalsNeedUpdate=!0,this.mesh.geometry.computeVertexNormals()}.bind(this)),this.scene.add(this.mesh),b){var k=new THREE.GridHelper(10,1);k.rotation.x=1.5708,k.setColors(65280,17408),this.scene.add(k)}this.update(),window.addEventListener("resize",function(){this.width=window.innerWidth,this.height=window.innerHeight,this.aspect=this.width/this.height,this.elem.setAttribute("width",this.width),this.elem.setAttribute("height",this.height)}.bind(this)),this.controls.update(this.clock.getDelta()),console.log(this.controls)}return a.prototype.update=function(){this.controls.update(this.clock.getDelta()),this.mesh.geometry.verticesNeedUpdate=!0,this.mesh.geometry.normalsNeedUpdate=!0,this.mesh.geometry.computeVertexNormals(),this.mesh.geometry.computeFaceNormals(),this.renderer.render(this.scene,this.camera),this.frame++,window.requestAnimationFrame(this.update.bind(this))},a.prototype.setContainer=function(a){this.elem=a,this.elem.appendChild(this.renderer.domElement)},a.prototype.setUIControls=function(a){this.uiControls=a},a}();return b.TerrainWorld=e,c.exports}),System.registerDynamic("app/views/remote-ui/remote-ui-demo.component.js",["../../conf","@angular/core","@angular/common","../../services/data-channel","../../scene/terrain.scene","../../components/button/button.component"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("../../conf"),g=a("@angular/core"),h=a("@angular/common"),i=a("../../services/data-channel"),j=a("../../scene/terrain.scene"),k=a("../../components/button/button.component"),l=function(){function a(a,b,c){this._ref=a,this._el=b,this._fb=c,this.ref=a,this.elem=b.nativeElement,this.messages=[],this.isConnected=!1,this.isConnecting=!1,this.isButtonDisabled=!0,this.toggleInvert=1,this.copy={headline:"Remote Terrain",line1:"Visit /ui on a mobile device",line2:"Use this code to connect the controller"},this.room=new h.Control(f["default"].room),this.form=c.group({room:this.room}),console.log(f["default"])}return a.prototype.ngOnInit=function(){var a=this;this.world=new j.TerrainWorld(!0,!1),this.world.setContainer(this.elem.querySelector(".scene")),this.form.valueChanges.subscribe(function(b){console.log(JSON.stringify(b)),5===b.room.length?a.isButtonDisabled=!1:a.isButtonDisabled=!0})},a.prototype.onKeyDown=function(a){},a.prototype.updateMessages=function(a){console.log(a);var b=a.currentValue;"joyLeft"===a.control&&(b[0]<0?(console.log("left"),this.world.controls.moveLeft=!0,this.world.controls.moveRight=!1):this.world.controls.moveLeft=!1,b[0]>0?(console.log("right"),this.world.controls.moveLeft=!1,this.world.controls.moveRight=!0):this.world.controls.moveRight=!1,b[1]>0?(console.log("forward"),this.world.controls.moveForward=!0,this.world.controls.moveBackward=!1):this.world.controls.moveForward=!1,b[1]<0?(console.log("backward"),this.world.controls.moveBackward=!0,this.world.controls.moveForward=!1):this.world.controls.moveBackward=!1),"joyRight"===a.control&&(this.world.controls.mouseX=b[0],this.world.controls.mouseY=b[1]),"slider"===a.control&&(this.world.camera.position.y=a.currentValue*this.toggleInvert),"toggle"===a.control&&(this.toggleInvert=1===this.toggleInvert?-1:1),this.messages.push(a),this.ref.detectChanges()},a.prototype.onClick=function(){var a=this;this.isConnected||(this.client=new i.DataChannel(f["default"].room,f["default"].username,f["default"].server),this.isConnecting=!0,this.client.emitter.subscribe(function(b){"open"===b&&(a.isConnected=!0,a.isConnecting=!1,a.client.observer.subscribe(function(b){var c=b[b.length-1].data;console.log(c),a.updateMessages(c)}),a.ref.detectChanges())}))},a=d([g.Component({selector:"view",moduleId:c.id,templateUrl:"remote-ui-demo.component.html",styleUrls:["remote-ui-demo.component.css"],providers:[h.FORM_PROVIDERS],directives:[h.FORM_DIRECTIVES,k.ButtonComponent]}),e("design:paramtypes",[g.ChangeDetectorRef,g.ElementRef,h.FormBuilder])],a)}();return b.RemoteUIDemo=l,c.exports}),System.registerDynamic("app/conf.js",[],!0,function(a,b,c){"use strict";var d=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},e=function(){for(var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;5>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a},f={room:e(),username:d(),server:"https://synth-io-c7564.firebaseio.com/"};return Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f,c.exports}),System.registerDynamic("app/services/data-channel.js",["@angular/core","rxjs/Observable","rxjs/add/operator/share"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("@angular/core"),g=a("rxjs/Observable");a("rxjs/add/operator/share");var h=function(){function a(a,b,c){var d=this;this._key=a,this._id=b,this._url=c;var e=this;this.id=b||Math.random().toString().replace(".",""),this.key=a||"1234",this.url=c,this.name="channel",this.db=new Firebase(this.url),this.count=0,this.hasPulse=!1,this.isOpen=!1,this.connections={},this.remotePeer=null,this.isWebSocket=!1,this.debug=!1,this.store={messages:[]},this.stun={iceServers:[{url:"stun:stun.l.google.com:19302"}]},this.conf={ordered:!1,maxRetransmitTime:1e3},this.channels={announce:this.db.child("announce"),signal:this.db.child("messages").child(this.id)},this.channels.signal.on("child_added",this.onSignal.bind(e)),this.channels.announce.on("child_added",this.onAnnounce.bind(e)),this.emitter=new f.EventEmitter,this.observer=new g.Observable(function(a){return d.channelObserver=a}).share(),this.sendAnnounce()}return a.prototype.sendAnnounce=function(){var a=this,b=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,c={sharedKey:this.key,id:this.id,method:b?"webrtc":"socket"};b||(this.isWebSocket=!0),this.channels.announce.remove(function(){a.channels.announce.push(c),a.debug&&console.log("Announced our sharedKey is "+a.key),a.debug&&console.log("Announced our ID is "+a.id)})},a.prototype.onAnnounce=function(a){var b=a.val();b.id!=this.id&&b.sharedKey==this.key&&(this.debug&&console.log("Discovered matching announcement from "+b.id),this.remotePeer=b.id,"webrtc"===b.method&&this.isWebSocket===!1?(this.init(),this.connect()):(this.sendSignal({id:this.id,key:this.key,url:this.url,type:"ws-offer"}),this.isOpen||this.initSocket(b)))},a.prototype.sendSignal=function(a){a.sender=this.id,this.db.child("messages").child(this.remotePeer).push(a)},a.prototype.onOffer=function(a){var b=this,c=window.RTCSessionDescription||window.mozRTCSessionDescription;this.hasPulse=!0,this.debug&&console.log("Client has pulse"),this.remotePeer=a.sender,this.init(),this.sendCandidates(),this.peerConnection.setRemoteDescription(new c(a)),this.peerConnection.createAnswer(function(c){b.debug&&console.log("Sending answer to "+a.sender),b.peerConnection.setLocalDescription(c),b.sendSignal(c.toJSON())},function(a){this.debug&&console.error("Could not create offer",a)})},a.prototype.onAnswerSignal=function(a){var b=window.RTCSessionDescription||window.mozRTCSessionDescription;this.debug&&console.log("Handling answer from "+this.remotePeer),this.peerConnection.setRemoteDescription(new b(a))},a.prototype.onCandidateSignal=function(a){var b=new window.RTCIceCandidate(a);this.debug&&console.log("Adding candidate to peerConnection: "+this.remotePeer),this.peerConnection.addIceCandidate(b)},a.prototype.onSignal=function(a){var b=a.val(),c=b.sender,d=b.type;this.isOpen||(this.debug&&console.log("Received a '"+d+"' signal from "+c+" of type "+d),"message"==d&&this.onWebSocketMessage(b),"ws-offer"==d&&(this.isOpen||this.initSocket(b)),"offer"==d?this.onOffer(b):"answer"==d?this.onAnswerSignal(b):"candidate"==d&&this.hasPulse&&this.onCandidateSignal(b))},a.prototype.sendCandidates=function(){this.peerConnection.onicecandidate=this.onICECandidate.bind(this)},a.prototype.onICEStateChange=function(){"disconnected"==this.peerConnection.iceConnectionState&&(this.debug&&console.log("Client disconnected!"),this.sendAnnounce())},a.prototype.onICECandidate=function(a){var b=a.candidate;b?(b=b.toJSON(),b.type="candidate",this.debug&&console.log("Sending candidate to "+this.remotePeer),this.sendSignal(b)):this.debug&&console.log("All candidates sent")},a.prototype.onDataChannel=function(a){a.channel.onmessage=this.onDataChannelMessage.bind(this)},a.prototype.onDataChannelOpen=function(){this.debug&&console.log("Data channel created! The channel is: "+this.channel.readyState),"open"==this.channel.readyState&&(this.isOpen=!0,this.emitter.emit("open"))},a.prototype.onDataChannelClosed=function(){this.debug&&console.log("The data channel has been closed!")},a.prototype.onDataChannelMessage=function(a){this.store.messages.push({id:this.count++,data:JSON.parse(a.data),sender:this.remotePeer,createdAt:new Date}),this.channelObserver.next(this.store.messages),this.debug&&console.log("Received Message: "+a.data)},a.prototype.onWebSocketMessage=function(a){this.store.messages.push({id:this.count++,data:JSON.parse(a.data),sender:a.sender,createdAt:new Date}),console.log(JSON.parse(a.data)),this.channelObserver.next(this.store.messages),this.debug&&console.log("Received Message: "+a.data)},a.prototype.onWebSocketSignal=function(a){var b=a.val(),c=b.sender,d=b.type;console.log(b),c===this.remotePeer&&(this.debug&&console.log("Received a '"+d+"' signal from "+c+" of type "+d),"message"==d&&this.onWebSocketMessage(b),"ws-offer"==d&&this.initSocket(b),"offer"==d?this.onOffer(b):"answer"==d?this.onAnswerSignal(b):"candidate"==d&&this.hasPulse&&this.onCandidateSignal(b))},a.prototype.sendSocketMessage=function(a){var b={type:"message",sender:this.id,data:a};console.log(b),this.debug&&console.log("Sending WebSocket message from: "+b.sender+" to: "+this.remotePeer),this.db.child("messages").child(this.remotePeer).push(b)},a.prototype.createWebSocketChannel=function(){return{send:this.sendSocketMessage.bind(this)}},a.prototype.connect=function(){var a=this;this.sendCandidates(),this.peerConnection.createOffer(function(b){a.debug&&console.log("Sending offer to "+a.remotePeer),a.peerConnection.setLocalDescription(b),a.sendSignal(b.toJSON())},function(a){console.error("Could not create offer for "+this.remotePeer,a)})},a.prototype.init=function(){var a=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;this.peerConnection=new a(this.stun),this.peerConnection.ondatachannel=this.onDataChannel.bind(this),this.peerConnection.oniceconnectionstatechange=this.onICEStateChange.bind(this),this.channel=this.peerConnection.createDataChannel(this.name,this.conf),this.channel.onopen=this.onDataChannelOpen.bind(this),this.channel.onmessage=this.onDataChannelMessage.bind(this),this.connections[this.remotePeer]=this.peerConnection,this.debug&&console.log("Setting up peer connection with "+this.remotePeer)},a.prototype.initSocket=function(a){this.remotePeer=a.id,this.isOpen||(this.isOpen=!0,this.emitter.emit("open"),this.channel=this.createWebSocketChannel(),this.channels.websocket=this.db.child("messages").child(this.id),this.channels.websocket.on("child_added",this.onWebSocketSignal.bind(this)),this.hasPulse=!0,this.debug&&console.log("Client has pulse"),this.debug&&console.log("Setting up websocket connection with "+this.remotePeer))},a=d([f.Injectable(),e("design:paramtypes",[String,String,String])],a)}();return b.DataChannel=h,c.exports}),System.registerDynamic("app/scene/rutt.shader.js",[],!0,function(a,b,c){"use strict";var d={uniforms:{tDiffuse:{type:"t",value:null},multiplier:{type:"f",value:13.3},displace:{type:"f",value:7.3},opacity:{type:"f",value:1},originX:{type:"f",value:0},originY:{type:"f",value:0},originZ:{type:"f",value:0}},vertexShader:["precision highp int;","precision highp float;","uniform sampler2D tDiffuse;","varying vec3 vColor;","varying vec2 vUv;","uniform float displace;","uniform float multiplier;","uniform float originX;","uniform float originY;","uniform float originZ;","void main() {","vec4 newVertexPos;","vec4 dv;","float df;","vUv = uv;","vec3 origin = vec3 (originX,originY,originZ);","dv = texture2D( tDiffuse, vUv.xy );","df = multiplier*dv.x + multiplier*dv.y + multiplier*dv.z;","newVertexPos = vec4( normalize(position - origin) * df * vec3 (1.0, 1.0, displace), 0.0 ) + vec4( position, 1.0 );","vColor = vec3( dv.x, dv.y, dv.z );","gl_Position = projectionMatrix * modelViewMatrix * newVertexPos;","}"].join("\n"),fragmentShader:["varying vec3 vColor;","uniform float opacity;","void main() {","gl_FragColor = vec4( vColor.rgb, opacity );","}"].join("\n")};return b.RuttEtraShader=d,c.exports}),System.registerDynamic("app/scene/synth.scene.js",["./rutt.shader"],!0,function(a,b,c){"use strict";var d=a("./rutt.shader"),e=function(){function a(a,b,c,d){this._video=a,this._control=b,this._cam=c,this._json=d,this.detail=480,this.hd=!0,this.mouseX=0,this.mouseY=0,this.videoisplaying=!1,this.audioin=!1,this.audioisplaying=!1,this.webcam=!1,this.guiSetup=!1,this.initComplete=!1,this.menusEnabled=!0,this.controls=!1,this.trigger=!1,this.shape="",this.meshUpdate=!1,this.wireframe=!1,this.camerax=0,this.cameray=-1130,this.cameraz=1680,this.scale=5,this.multiplier=1,this.displace=1,this.transparency=.8,this.originX=0,this.originY=0,this.originZ=-2e3,this.hue=0,this.saturation=.9,this.bgColor="#000000",this.opacity=1,this.presets=[],this.videoInput=a,this.cam=c,this.control=b,this.mouseX=this.mousex=0,this.mouseY=this.mousey=0,this.windowHalfX=window.innerWidth/2,this.windowHalfY=window.innerHeight/2,this.vendorURL=window.URL,this.config=d,this.init(d)}return a.prototype.init=function(a){var b=this;this.clock=new THREE.Clock,this.camera=new THREE.PerspectiveCamera(40,window.innerWidth/window.innerHeight,1,1e4),this.scene=new THREE.Scene,this.texture=new THREE.Texture(this.videoInput),this.texture.minFilter=THREE.LinearFilter,this.texture.magFilter=THREE.LinearFilter,this.texture.format=THREE.RGBFormat,this.texture.generateMipmaps=!0,this.videoMaterial=new THREE.ShaderMaterial({uniforms:{tDiffuse:{type:"t",value:this.texture},multiplier:{type:"f",value:this.multiplier},displace:{type:"f",value:this.displace},opacity:{type:"f",value:this.opacity},originX:{type:"f",value:this.originX},originY:{type:"f",value:this.originY},originZ:{type:"f",value:this.originZ}},vertexShader:d.RuttEtraShader.vertexShader,fragmentShader:d.RuttEtraShader.fragmentShader,depthWrite:!0,depthTest:!0,wireframe:this.wireframe,transparent:!0,overdraw:!1}),this.videoMaterial.renderToScreen=!1,this.key=new THREE.DirectionalLight(16777215),this.key.position.set(0,-100,100).normalize(),this.key.intensity=.3,this.key.castShadow=!0,this.scene.add(this.key),this.fill=new THREE.DirectionalLight(16777215),this.fill.position.set(0,100,100).normalize(),this.fill.intensity=.1,this.fill.castShadow=!0,this.scene.add(this.fill),this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,this.renderer.autoClear=!1,Promise.all([System["import"]("/vendor/three/examples/js/shaders/CopyShader.js"),System["import"]("/vendor/three/examples/js/shaders/ConvolutionShader.js"),System["import"]("/vendor/three/examples/js/shaders/BokehShader.js"),System["import"]("/vendor/three/examples/js/shaders/HueSaturationShader.js"),System["import"]("/vendor/three/examples/js/postprocessing/EffectComposer.js")]).then(function(){return Promise.all([System["import"]("/vendor/three/examples/js/postprocessing/MaskPass.js"),System["import"]("/vendor/three/examples/js/postprocessing/RenderPass.js"),System["import"]("/vendor/three/examples/js/postprocessing/ShaderPass.js"),System["import"]("/vendor/three/examples/js/postprocessing/BloomPass.js")])}).then(function(){b.composer=new THREE.EffectComposer(b.renderer),b.renderModel=new THREE.RenderPass(b.scene,b.camera),b.composer.addPass(b.renderModel),b.effectHue=new THREE.ShaderPass(THREE.HueSaturationShader),b.effectHue.renderToScreen=!0,b.composer.addPass(b.effectHue),b.setDefaults(a,0),b.initComplete=!0}),window.addEventListener("resize",this.onResize.bind(this),!1),document.addEventListener("mousemove",this.onDocumentMouseMove.bind(this),!1)},a.prototype.update=function(){window.requestAnimationFrame(this.update.bind(this)),this.render()},a.prototype.render=function(){var a=this.clock.getDelta();4===this.videoInput.readyState&&(this.texture&&(this.texture.needsUpdate=!0),this.videoMaterial&&(this.videoMaterial.needsUpdate=!0)),this.camera.lookAt(this.scene.position),void 0!==this.composer?this.composer.render(a):this.renderer.render(this.scene,this.camera)},a.prototype.meshChange=function(a,b,c){var d=this;switch(d.shape=a,null!==b&&void 0!==b||(b=64),null!==c&&void 0!==c||(c=64),b>=480&&(b=480),c>=480&&(c=480),d.meshUpdate===!0&&(d.geometry.verticesNeedUpdate=!1,d.geometry.dynamic=!1,d.geometry=null,d.videoMaterial.renderToScreen=!1,d.scene.remove(d.mesh)),a){case"plane":if(d.hd===!0){var e=9*b/16;d.geometry=new THREE.PlaneGeometry(b,b,e,e)}else d.geometry=new THREE.PlaneGeometry(b,c,b,c);d.mesh=new THREE.Mesh(d.geometry,d.videoMaterial);break;case"sphere":d.geometry=new THREE.SphereGeometry(b,c,c),d.mesh=new THREE.Mesh(d.geometry,d.videoMaterial);break;case"cube":(b>60||c>60)&&(b=c=60),d.geometry=new THREE.BoxGeometry(b,b,b,c,c,c),d.mesh=new THREE.Mesh(d.geometry,d.videoMaterial);break;case"cylinder":d.geometry=new THREE.CylinderGeometry(2*d.scale,2*d.scale,8*b,c,b,!1),d.mesh=new THREE.Mesh(d.geometry,d.videoMaterial);break;case"torus":d.geometry=new THREE.TorusGeometry(d.scale,b,b,b),d.mesh=new THREE.Mesh(d.geometry,d.videoMaterial);break;case"ring":d.geometry=new THREE.RingGeometry(b,b,c,c),d.mesh=new THREE.Mesh(d.geometry,d.videoMaterial);break;case"tetra":d.geometry=new THREE.TetrahedronGeometry(b,c),d.mesh=new THREE.Mesh(d.geometry,d.videoMaterial);break;case"octa":d.geometry=new THREE.OctahedronGeometry(b,c),d.mesh=new THREE.Mesh(d.geometry,d.videoMaterial);break;case"poly":d.geometry=new THREE.PolyhedronGeometry(b,c,d.scale,d.scale),d.mesh=new THREE.Mesh(d.geometry,d.videoMaterial);break;default:if(d.hd===!0){var e=9*b/16;d.geometry=new THREE.PlaneGeometry(b,b,e,e)}else d.geometry=new THREE.PlaneGeometry(b,c,b,c);d.mesh=new THREE.Mesh(d.geometry,d.videoMaterial)}d.key.target=d.mesh,d.fill.target=d.mesh,d.meshUpdate=!0,d.scene.add(d.mesh),d.mesh.doubleSided=!0,d.mesh.position.x=d.mesh.position.y=d.mesh.position.z=0,d.mesh.scale.x=d.mesh.scale.y=d.mesh.scale.z=d.scale,d.mesh.castShadow=!0,d.geometry.dynamic=!0,d.geometry.verticesNeedUpdate=!0,d.videoMaterial.renderToScreen=!0},a.prototype.removeMesh=function(a){this.scene.remove(a)},a.prototype.addMesh=function(a){this.scene.add(a)},a.prototype.setParams=function(){this.videoMaterial.uniforms.displace.value=this.displacement,this.videoMaterial.uniforms.multiplier.value=this.multiply,this.videoMaterial.uniforms.opacity.value=parseFloat(this.opacity),this.videoMaterial.uniforms.originX.value=parseFloat(this.originX),this.videoMaterial.uniforms.originY.value=parseFloat(this.originY),this.videoMaterial.uniforms.originZ.value=parseFloat(this.originZ),this.effectHue.uniforms.hue.value=this.hue,this.effectHue.uniforms.saturation.value=this.saturation,this.renderer.setClearColor(parseInt(this.bg.replace("#","0x")),1)},a.prototype.setDefaults=function(a,b){var c=a[b],d=c.origin.split(","),e=c.camera.split(",");this.originX=parseFloat(d[0]),this.originY=parseFloat(d[1]),this.originZ=parseFloat(d[2]),this.camera.position.x=parseFloat(e[0]),this.camera.position.y=parseFloat(e[1]),this.camera.position.z=parseFloat(e[2]),this.scale=c.scale,this.multiply=c.multiplier,this.displacement=c.displace,this.opacity=c.opacity,this.saturation=c.saturation,this.hue=c.hue,this.bg=c.bgColor,this.detail=c.detail,this.wireframe=c.wireframe,this.meshChange(c.shape,c.detail,c.detail),this.setParams()},a.prototype.defaultVideo=function(a){this.videoInput.setAttribute("src",a),this.videoInput.load(),this.videoInput.loop=!0},a.prototype.playVideo=function(a){this.webcam=!1,this.videoInput.pause(),this.videoisplaying=!1,this.videoInput.src=this.vplaylist[a],this.videoInput.muted=!0,this.videoInput.play(),this.videoisplaying=!0},a.prototype.streamVideo=function(a){this.webcam=!0,this.videoObject=this.vendorURL.createObjectURL(a),this.videoInput.src=this.videoObject},a.prototype.initStream=function(){var a=this,b="";console.log("init Webcam!"),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia({video:!0,audio:!1},function(b){navigator.mozGetUserMedia?a.videoInput.mozSrcObject=b:a.videoStream=b},function(a){b="Unable to capture WebCam. Please reload the page or try with Google Chrome."}),navigator.getUserMedia({video:!1,audio:!0},function(b){navigator.mozGetUserMedia?a.videoInput.mozSrcObject=b:a.audioStream=b},function(a){b="Unable to capture audio input. Please reload the page or try with Google Chrome."})},a.prototype.onResize=function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.composer.reset()},a.prototype.onDocumentMouseMove=function(a){this.mouseX=a.clientX-this.windowHalfX,this.mouseY=.3*(a.clientY-this.windowHalfY)},a.prototype.setContainer=function(a){this.elem=a,this.elem.appendChild(this.renderer.domElement)},a}();return b.Synth=e,c.exports}),System.registerDynamic("app/components/button/button.component.js",["@angular/core"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("@angular/core"),g=function(){function a(a){this.elem=a.nativeElement}return a.prototype.ngOnInit=function(){this.options&&(this.options.position&&(this.elem.style.position=this.options.position),this.options.x&&(this.elem.style.left=this.options.x),this.options.y&&(this.elem.style.top=this.options.y))},a.prototype.onClick=function(a){this.options&&this.options.onClick(a)},d([f.Input(),e("design:type",Object)],a.prototype,"options",void 0),a=d([f.Component({moduleId:c.id,selector:"ui-button",templateUrl:"button.component.html",styleUrls:["button.component.css"]}),e("design:paramtypes",[f.ElementRef])],a)}();return b.ButtonComponent=g,c.exports}),System.registerDynamic("app/views/synth/synth.component.js",["../../conf","@angular/core","@angular/common","../../services/data-channel","../../scene/synth.scene","../../components/button/button.component"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("../../conf"),g=a("@angular/core"),h=a("@angular/common"),i=a("../../services/data-channel"),j=a("../../scene/synth.scene"),k=a("../../components/button/button.component"),l=function(){function a(a,b,c){this._ref=a,this._el=b,this._fb=c,this.ref=a,this.elem=b.nativeElement,this.messages=[],this.isConnected=!1,this.isConnecting=!1,this.isButtonDisabled=!0,this.toggleInvert=1,this.copy={headline:"Synth",line1:"Visit /ui on a mobile device",line2:"Use this code to connect the controller"},this.room=new h.Control(f["default"].room),this.form=c.group({room:this.room})}return a.prototype.ngOnInit=function(){var a=this;this.world=new j.Synth(this.elem.querySelector("video"),!0,!0,[{camera:"0,-400,400",shape:"plane",detail:1024,scale:1.5,wireframe:!1,multiplier:5,displace:24,origin:"0,0,-100",opacity:.2,hue:0,saturation:.75,bgColor:"#000000"}]),this.world.setContainer(this.elem.querySelector(".scene")),this.world.defaultVideo("/assets/video/kinetic-light.mp4"),this.world.update(),this.form.valueChanges.subscribe(function(b){console.log(JSON.stringify(b)),5===b.room.length?a.isButtonDisabled=!1:a.isButtonDisabled=!0})},a.prototype.onKeyDown=function(a){},a.prototype.updateMessages=function(a){console.log(a);var b=a.currentValue;"joyLeft"===a.control&&(b[0]<0?(console.log("left"),this.world.controls.moveLeft=!0,this.world.controls.moveRight=!1):this.world.controls.moveLeft=!1,b[0]>0?(console.log("right"),this.world.controls.moveLeft=!1,this.world.controls.moveRight=!0):this.world.controls.moveRight=!1,b[1]>0?(console.log("forward"),this.world.controls.moveForward=!0,this.world.controls.moveBackward=!1):this.world.controls.moveForward=!1,b[1]<0?(console.log("backward"),this.world.controls.moveBackward=!0,this.world.controls.moveForward=!1):this.world.controls.moveBackward=!1),"joyRight"===a.control&&(this.world.controls.mouseX=b[0],this.world.controls.mouseY=b[1]),"slider"===a.control&&(this.world.camera.position.y=a.currentValue*this.toggleInvert),"toggle"===a.control&&(this.toggleInvert=1===this.toggleInvert?-1:1),this.messages.push(a),this.ref.detectChanges()},a.prototype.onClick=function(){var a=this;this.isConnected||(this.client=new i.DataChannel(f["default"].room,f["default"].username,f["default"].server),this.isConnecting=!0,this.client.emitter.subscribe(function(b){"open"===b&&(a.isConnected=!0,a.isConnecting=!1,a.client.observer.subscribe(function(b){var c=b[b.length-1].data;console.log(c),a.updateMessages(c)}),a.ref.detectChanges())}))},a=d([g.Component({selector:"view",moduleId:c.id,templateUrl:"synth.component.html",styleUrls:["synth.component.css"],providers:[h.FORM_PROVIDERS],directives:[h.FORM_DIRECTIVES,k.ButtonComponent]}),e("design:paramtypes",[g.ChangeDetectorRef,g.ElementRef,h.FormBuilder])],a)}();return b.SynthComponent=l,c.exports}),System.registerDynamic("app/scene/particle.scene.js",[],!0,function(a,b,c){"use strict";var d=function(){function a(a,b){var c=this;this.angle=Math.PI/180,this.width=window.innerWidth,this.height=window.innerHeight,this.aspect=this.width/this.height,this.frame=0,this.speed=this.frame/100,this.clock=new THREE.Clock,this.scene=new THREE.Scene,this.scene.fog=new THREE.Fog(0,.001,10),this.camera=new THREE.PerspectiveCamera(90,c.width/c.height,.1,10),this.camera.position.y=.8,this.camera.position.z=2,this.camera.lookAt(new THREE.Vector3(0,0,0)),this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setClearColor(0),this.renderer.setSize(c.width,c.height),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,this.geometry=new THREE.Geometry,this.geometry.verticesNeedUpdate=!0;var d=(new THREE.TextureLoader).load("/assets/img/circle.svg"),e=new THREE.PointsMaterial({fog:!0,size:.1,map:d,transparent:!0,alphaTest:.15}),f=new THREE.LineBasicMaterial({fog:!0,color:16777215,linewidth:2});this.sunLight=new THREE.AmbientLight(4210752),this.scene.add(this.sunLight),this.shadowLight=new THREE.SpotLight(16777215),this.shadowLight.position.set(-10,10,-10),this.shadowLight.castShadow=!0,this.scene.add(this.shadowLight);for(var g=0;500>g;g++){var h=new THREE.Vector3(this.randomPosition(-10,10),this.randomPosition(-10,10),this.randomPosition(-10,10));this.geometry.vertices.push(h)}if(this.particleCloud=new THREE.Points(this.geometry,e),this.scene.add(this.particleCloud),this.particleLine=new THREE.Line(this.geometry,f),this.scene.add(this.particleLine),b){var i=new THREE.GridHelper(10,1);
i.rotation.x=1.5708,i.setColors(65280,17408),this.scene.add(i)}window.addEventListener("resize",function(){this.width=window.innerWidth,this.height=window.innerHeight,this.aspect=this.width/this.height,this.elem.setAttribute("width",this.width),this.elem.setAttribute("height",this.height)}.bind(this)),Promise.all([System["import"]("/vendor/three/examples/js/shaders/CopyShader.js"),System["import"]("/vendor/three/examples/js/shaders/ConvolutionShader.js"),System["import"]("/vendor/three/examples/js/shaders/BokehShader.js"),System["import"]("/vendor/three/examples/js/shaders/DotScreenShader.js"),System["import"]("/vendor/three/examples/js/postprocessing/EffectComposer.js")]).then(function(){return Promise.all([System["import"]("/vendor/three/examples/js/postprocessing/MaskPass.js"),System["import"]("/vendor/three/examples/js/postprocessing/RenderPass.js"),System["import"]("/vendor/three/examples/js/postprocessing/ShaderPass.js"),System["import"]("/vendor/three/examples/js/postprocessing/BokehPass.js")])}).then(function(){c.composer=new THREE.EffectComposer(c.renderer),c.renderPass=new THREE.RenderPass(c.scene,c.camera),c.composer.addPass(c.renderPass)})}return a.prototype.render=function(){this.clock.getDelta();this.particleCloud.rotation.y+=1e-4,this.particleLine.rotation.y+=1e-4,this.renderer.render(this.scene,this.camera)},a.prototype.update=function(){this.frame++,window.requestAnimationFrame(this.update.bind(this)),this.render()},a.prototype.setContainer=function(a){this.elem=a,this.elem.appendChild(this.renderer.domElement)},a.prototype.randomPosition=function(a,b){return Math.random()*(b-a+1)+a},a}();return b.ParticleWorld=d,c.exports}),System.registerDynamic("app/views/particle/particle.component.js",["@angular/core","../../scene/particle.scene"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("@angular/core"),g=a("../../scene/particle.scene"),h=function(){function a(a,b){this._ref=a,this._el=b,this.ref=a,this.elem=b.nativeElement}return a.prototype.ngOnInit=function(){this.world=new g.ParticleWorld(!1,!1),this.world.setContainer(this.elem.querySelector(".scene")),this.world.update()},a=d([f.Component({moduleId:c.id,selector:"particle",templateUrl:"particle.component.html",styleUrls:["particle.component.css"]}),e("design:paramtypes",[f.ChangeDetectorRef,f.ElementRef])],a)}();return b.ParticleComponent=h,c.exports}),System.registerDynamic("app/components/nav/nav.component.js",["@angular/core","@angular/router"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("@angular/core"),g=a("@angular/router"),h=function(){function a(a,b,c){this.isVisible=!1,this.elem=c.nativeElement,this.ref=b}return a.prototype.ngOnInit=function(){var a=this;setTimeout(function(){a.isVisible=!0,a.ref.detectChanges()},100)},a=d([f.Component({selector:"global-nav",template:'\n    <nav>\n      <ul [class.active]="isVisible">\n        <li class="nav__item" ><a [routerLink]="[\'/\']" >home</a></li>\n        <li class="nav__item" ><a [routerLink]="[\'/ui\']" >ui</a></li>\n        <li class="nav__item" ><a [routerLink]="[\'/music\']" >music</a></li>\n        <li class="nav__item" ><a [routerLink]="[\'/synth\']" >synth</a></li>\n        <li class="nav__item" ><a [routerLink]="[\'/remote\']" >remote</a></li>\n        <li class="nav__item" ><a [routerLink]="[\'/particle\']" >particle</a></li>\n        <li class="nav__item" ><a [routerLink]="[\'/about\']" >about</a></li>\n      </ul>\n    </nav>\n   ',directives:[g.ROUTER_DIRECTIVES],moduleId:c.id,styleUrls:["nav.component.css"]}),e("design:paramtypes",[g.Router,f.ChangeDetectorRef,f.ElementRef])],a)}();return b.GlobalNav=h,c.exports}),System.registerDynamic("app/app.component.js",["@angular/core","@angular/router","./views/default/default.component","./views/about/about.component","./views/music-player/music-player.component","./views/ui-test/ui-test.component","./views/rtc-client/rtc-client.component","./views/remote-ui/remote-ui-demo.component","./views/synth/synth.component","./views/particle/particle.component","./components/nav/nav.component"],!0,function(a,b,c){"use strict";var d=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},e=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},f=a("@angular/core"),g=a("@angular/router"),h=a("./views/default/default.component"),i=a("./views/about/about.component"),j=a("./views/music-player/music-player.component"),k=a("./views/ui-test/ui-test.component"),l=a("./views/rtc-client/rtc-client.component"),m=a("./views/remote-ui/remote-ui-demo.component"),n=a("./views/synth/synth.component"),o=a("./views/particle/particle.component"),p=a("./components/nav/nav.component"),q=function(){function a(a){}return a=d([f.Component({selector:"app",template:'\n    <global-nav></global-nav>\n    <div class="outer-outlet">\n      <router-outlet></router-outlet>\n    </div>\n   ',directives:[g.ROUTER_DIRECTIVES,p.GlobalNav],moduleId:c.id,styleUrls:["app.component.css"]}),g.Routes([{path:"/",component:h.Default},{path:"/music",component:j.MusicPlayer},{path:"/ui",component:k.UIComponentTest},{path:"/about",component:i.About},{path:"/remote",component:m.RemoteUIDemo},{path:"/synth",component:n.SynthComponent},{path:"/webrtc/client",component:l.DataChannelClient},{path:"/particle",component:o.ParticleComponent}]),e("design:paramtypes",[g.Router])],a)}();return b.AppComponent=q,c.exports}),System.registerDynamic("app/index.js",["./environment","./app.component"],!0,function(a,b,c){"use strict";var d=a("./environment");b.environment=d.environment;var e=a("./app.component");return b.AppComponent=e.AppComponent,c.exports});